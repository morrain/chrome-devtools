## 异常处理

谷歌开发者工具提供了一些工具，可帮助你修复那些在JavaScript脚本中抛出异常和错误的网页。当你清楚那些异常或者错误背后的细节时，你会发现异常和错误原来是非常有用的。当页面抛出异常或脚本产生错误时，控制台会提供具体的可靠信息，以帮助你找到并解决那些问题。

使用控制台，你可以捕获到异常，可以跟踪产生异常的执行路径，甚至可以设置异常处理函数来自动收集和处理这些异常。

**总的来说本节包括如下内容**

* 开启[异常中断](设置断点.md)，当异常发生时中断执行，调试异常发生时的上下文环境
* 使用`console.trace()`打印调用栈信息
* 使用`console.assert()`在代码中设置断言，当异常发生时及时报错提醒
* 使用`window.onerror`记录浏览器中发生的错误

### 捕获异常

当页面出现异常时，打开开发者工具，查看控制台报错，点击定位到相应的出错的文件，会看到如下图所示报错信息:

![](https://developers.google.cn/web/tools/chrome-devtools/console/images/track-exceptions-tracking-exceptions.jpg)

#### 查看异常时的调用栈信息

当异常发生时，我们有时需要知道导致异常发生的代码执行路径。如下图所示，在控制台中找到该异常，点击错误信息左边的小箭头展开，会显示完整的调用栈信息。点击会定位到相应文件的相应行。

![](https://developers.google.cn/web/tools/chrome-devtools/console/images/track-exceptions-exception-stack-trace.jpg)

#### 出现异常时中断

在[设置断点](设置断点.md)章节，我们介绍了异常断点。当异常发生时，代码会中断执行，我们不仅能看到代码执行的调用栈、错误信息，还能看到当时作用域以及当时作用域内的变量值。通过逐步执行操作区的八边形摁钮，可能设置中断所有异常、中断未被捕获的异常以及不捕获异常等等。如下图所示：

![](https://developers.google.cn/web/tools/chrome-devtools/console/images/track-exceptions-pause-execution.jpg)

