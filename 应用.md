<!-- toc -->

## 检查与管理存储、数据库与缓存

> 从Chrome52版本开始，以前的**Resources**面板更名为**Application**面板，除了保留之前面板的功能外，增加了调试渐进式应用的功能。关于调试渐进式网页应用的内容，请参考相关章节。本节主要讲述如何查看与管理网页存储相关的内容。

**总的来说本节包括如下内容**

- 查看和修改[Local Storage](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage)与[Session Storage](https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage)。
- 检查和修改 IndexedDB 数据库。
- 对WebSQL数据库执行SQL语句。
- 查看应用缓存以及[Service Worker](https://developers.google.com/web/fundamentals/getting-started/primers/service-workers)缓存。
- 清除存储、数据库、缓存和服务工作线程

### Local Storage

如果您使用Local Storage存储键值对(KVP:key-value pair)，则可以从Local Storage窗格中查看、修改和删除这些键值对。

![](/assets/application/local-storage.png)

  - 双击键或值可以修改相应的值。
  - 双击空白单元格可以添加新的键值对。
  - 点击某行，然后按删除按钮 (![](/assets/application/delete.png)) 可以删除该键值对。 
  - 点击某行，然后按清空按钮（红框内中间那个按钮），可以清空当前域的所有Local Storage。
  - 如果页面中对这些键值对做了修改，这里并不会看到这些更改实时更新。 需要点击刷新按钮(![](/assets/application/refresh.png))查看更改。
  - 当键值对非常多时，可以通过Filter输入框，输入关键字进行过滤。

### Session Storage

Session Storage与Local Storage的操作方式一致，可以参考上面Local Storage的介绍，这里不再重复。

### IndexedDB

尽管上面介绍的Local Storage和Session Storage对于存储较小数量的数据非常有用，但是对于存储更大量的结构化数据却不太适用用。[IndexedDB](https://developer.mozilla.org/zh-CN/docs/Web/API/IndexedDB_API)提供了一个解决方案。

使用IndexedDB窗格可以查看、修改和删除IndexedDB数据。

展开IndexedDB窗格时，IndexedDB下的第一个级别是数据库。 如果存在多个活动的数据库，您会看到多个条目。 在下面的屏幕截图中，页面只有一个活动的数据库。

![](/assets/application/idb-tab.png)

点击数据库的名称可以查看该数据库的安全域、名称和版本。

![](/assets/application/idb-db.png)

展开数据库可以查看很多表（本例中只有stickie一张表），点击表会显示该表包含的键值对。

![](/assets/application/idb-kvps.png)

**Start from key**输入框旁的箭头按钮可以进行翻页。

展开值并双击可以编辑该值，当页面有添加、修改或删除值的操作时，这些更改不会实时更新。需要点击旁边的刷新按钮（![](/assets/application/refresh.png)）来更新数据显示。

![](/assets/application/idb-edit.png)

在**Start from key**输入框中输入关键字可以过滤出以所输入关键词开始的所有键。

![](/assets/application/idb-filter.png)

点击 Clear Object Store 按钮 (![](/assets/application/clear-object-store.png)) 可以删除数据库中的所有数据。 从 [Clear storage 窗格](https://developers.google.com/web/tools/chrome-devtools/manage-data/local-storage#clear-storage)中，点击一次按钮注销服务工作线程并移除其他存储与缓存也可以实现此目标。

### Web SQL

使用 Web SQL 窗格可以查询和修改 Web SQL 数据库。

点击数据库名称可以打开该数据库的控制台。从这里，您可以对数据库执行语句。

![](/assets/application/web-sql-console.png)

点击数据库表可以查看该表的数据。

![](/assets/application/web-sql-table.png)

  - 您无法从这里更新值，但是可以通过数据库控制台（参见上文）更新。
  - 点击列标题可以按该列排序表格。
  - 您对表格的更改不会实时更新。点击 refresh 按钮 (![](/assets/application/refresh.png)) 可以查看更新。
  - 在 Visibile columns 文本字段中输入一个由空格分隔或逗号分隔的列名称列表可以仅显示列表中包含的列。

### 应用缓存

使用 Application Cache 窗格可以检查通过 [Application Cache API](https://developer.mozilla.org/en-US/docs/Web/HTML/Using_the_application_cache) 创建的资源和规则。

![](/assets/application/appcache.png)

每一行表示一个资源。

Type 列的值为以下值之一：

  - **Master** 资源上指示此缓存为其主文件的 manifest 属性。
  - **Explicit** 此资源在清单中明确列出。
  - **Network** 指定此资源的清单必须来自网络。
  - **Fallback** Resource 列中的网址作为另一个网址（未在 DevTools 中显示）的回退网址形式列出。
  
表格底部拥有指示网络连接和应用缓存状态的状态图标。 应用缓存可能拥有以下状态：

  - **IDLE** 缓存没有新更改。
  - **CHECKING** 正在提取清单并检查有无更新。
  - **DOWNLOADING** 正在将资源添加到缓存中。
  - **UPDATEREADY** 存在新版本的缓存。
  - **OBSOLETE** 正在删除缓存。
  
### 服务工作线程缓存

利用 Application 面板上的 Cache Storage 窗格，您可以检查、修改和调试使用（服务工作线程）Cache API 创建的缓存。 参阅下面的指南获取更多帮助。

有时，您只需要擦除给定源的所有数据。利用 Application 面板上的 Clear Storage 窗格，您可以选择性地注销服务工作线程、存储和缓存。要清除数据，只需启用您想要擦除的组件旁的复选框，然后点击 Clear site data。操作将擦除 Clear storage 标签下所列源的所有数据。

![](/assets/application/clear-storage.png)  

