<!-- toc -->

## 检查与管理存储、数据库与缓存

> 从Chrome52版本开始，以前的**Resources**面板更名为**Application**面板，除了保留之前面板的功能外，增加了调试渐进式应用的功能。关于调试渐进式网页应用的内容，请参考相关章节。本节主要讲述如何查看与管理网页存储相关的内容。

**总的来说本节包括如下内容**

- 查看和修改[localStorage](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage)与[sessionStorage](https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage)。
- 检查和修改 IndexedDB 数据库。
- 对WebSQL数据库执行SQL语句。
- 查看应用缓存以及[Service Worker](https://developers.google.com/web/fundamentals/getting-started/primers/service-workers)缓存。
- 清除存储、数据库、缓存和服务工作线程

### localStorage

如果您使用localStorage存储键值对(KVP:key-value pair)，则可以从localStorage窗格中查看、修改和删除这些键值对。

![](/assets/application/local-storage.png)

  - 双击键或值可以修改相应的值。
  - 双击空白单元格可以添加新的键值对。
  - 点击某行，然后按删除按钮 (![](/assets/application/delete.png)) 可以删除该键值对。 只需点击一次按钮，即可从 Clear storage 窗格擦除所有本地存储数据。
  - 如果您使用一种可以创建、删除或修改 KVP 的方式与页面交互，则不会看到这些更改实时更新。 点击 refresh 按钮 (![](/assets/application/refresh.png)) 可以查看您的更改。

### sessionStorage

Session Storage 窗格与 Local Storage 窗格的工作方式相同。 参阅上面的localStorage

部分，了解如何查看和编辑[sessionStorage](https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage)。

### IndexedDB

使用 IndexedDB 窗格可以检查、修改和删除 IndexedDB 数据。

展开 IndexedDB 窗格时，IndexedDB 下的第一个级别是数据库。 如果存在多个活动的数据库，您会看到多个条目。 在下面的屏幕截图中，页面只有一个活动的数据库。

![](/assets/application/idb-tab.png)

点击数据库的名称可以查看该数据库的安全源、名称和版本。

![](/assets/application/idb-db.png)

展开数据库可以查看其键值对 (KVP)。

![](/assets/application/idb-kvps.png)

使用 Start from key 文本字段旁的箭头按钮可以在 KVP 的页面之间移动。

展开值并双击可以编辑该值。在您添加、修改或删除值时，这些更改不会实时更新。

点击 refresh 按钮可以更新数据库。

![](/assets/application/idb-edit.png)

在 Start from key 文本字段中输入键可以过滤出值小于该值的所有键。

![](/assets/application/idb-filter.png)

在您添加、修改或删除值时，这些更改不会实时更新。 点击 refresh 按钮 (![](/assets/application/refresh.png) 可以更新数据库。

点击 Clear Object Store 按钮 (![](/assets/application/clear-object-store.png)) 可以删除数据库中的所有数据。 从 [Clear storage 窗格](https://developers.google.com/web/tools/chrome-devtools/manage-data/local-storage#clear-storage)中，点击一次按钮注销服务工作线程并移除其他存储与缓存也可以实现此目标。

### Web SQL

使用 Web SQL 窗格可以查询和修改 Web SQL 数据库。

点击数据库名称可以打开该数据库的控制台。从这里，您可以对数据库执行语句。

![](/assets/application/web-sql-console.png)

点击数据库表可以查看该表的数据。

![](/assets/application/web-sql-table.png)

  - 您无法从这里更新值，但是可以通过数据库控制台（参见上文）更新。
  - 点击列标题可以按该列排序表格。
  - 您对表格的更改不会实时更新。点击 refresh 按钮 (![](/assets/application/refresh.png)) 可以查看更新。
  - 在 Visibile columns 文本字段中输入一个由空格分隔或逗号分隔的列名称列表可以仅显示列表中包含的列。

### 应用缓存

使用 Application Cache 窗格可以检查通过 [Application Cache API](https://developer.mozilla.org/en-US/docs/Web/HTML/Using_the_application_cache) 创建的资源和规则。

![](/assets/application/appcache.png)

每一行表示一个资源。

Type 列的值为以下值之一：

  - **Master** 资源上指示此缓存为其主文件的 manifest 属性。
  - **Explicit** 此资源在清单中明确列出。
  - **Network** 指定此资源的清单必须来自网络。
  - **Fallback** Resource 列中的网址作为另一个网址（未在 DevTools 中显示）的回退网址形式列出。
  
表格底部拥有指示网络连接和应用缓存状态的状态图标。 应用缓存可能拥有以下状态：

  - **IDLE** 缓存没有新更改。
  - **CHECKING** 正在提取清单并检查有无更新。
  - **DOWNLOADING** 正在将资源添加到缓存中。
  - **UPDATEREADY** 存在新版本的缓存。
  - **OBSOLETE** 正在删除缓存。
  
### 服务工作线程缓存

利用 Application 面板上的 Cache Storage 窗格，您可以检查、修改和调试使用（服务工作线程）Cache API 创建的缓存。 参阅下面的指南获取更多帮助。

有时，您只需要擦除给定源的所有数据。利用 Application 面板上的 Clear Storage 窗格，您可以选择性地注销服务工作线程、存储和缓存。要清除数据，只需启用您想要擦除的组件旁的复选框，然后点击 Clear site data。操作将擦除 Clear storage 标签下所列源的所有数据。

![](/assets/application/clear-storage.png)  

