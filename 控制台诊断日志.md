## 控制台诊断日志

控制台日志是检查页面以及程序干了什么的有效工具。现在请跟我一起来探索控制台日志的一些高级用法。

**总的来说本节包括如下内容**

* 使用`console.log()`进行基本的输出
* 使用`console.error()`和`console.warn()`输出一些引人注意的重要信息
* 使用`console.group()`和`console.groupEnd()`分组输出一些信息，防止输出信息太乱
* 使用`console.assert()`来显示断言错误信息

### 输出到控制台

使用`console.log()`可以将信息输出到控制台，它可以接受多个参数，多个参数用逗号分隔，例如在JavaScript脚本中执行以下代码：

`console.log("Node count:", a.childNodes.length, "and the current time is:", Date.now());`

在控制台中输出如下图所示的信息：

![](https://developers.google.cn/web/tools/chrome-devtools/console/images/console-write-log-multiple.png)

### 自动填充命令

当你在控制台中输入的时候，控制台会自动弹出下拉框显示与你当前输入匹配的方法，其中包括你曾经输入的命令。如下图所示，可以通过键盘上下箭头进行选择，按tab自动填充选中的命令，默认匹配第一条命令。

![](https://developers.google.cn/web/tools/chrome-devtools/console/images/autocomplete.png)

### 格式化输出

#### 分组输出

可以使用`console.group()`将同一类的信息以一组消息的形式进行输出。该函数接受一个字符串参数，用来作为分组名。调用过`console.group()`后，接下来所有`console.log()`输出都会被按输出顺序归为一组，直到`console.groupEnd()`被调用。例如如下代码：

![](http://p1.bqimg.com/582863/e6427162dd2ff749.png)

执行后输出结果如下图：

![](https://developers.google.cn/web/tools/chrome-devtools/console/images/console-write-group.png)

#### 分组嵌套

当输出信息比较庞大时，为了更好的展示输出信息，可能会用的分组嵌套。

如下示例所示：

![](http://p1.bqimg.com/582863/2d78a589ce37afc3.png)

输出信息为：

![](https://developers.google.cn/web/tools/chrome-devtools/console/images/console-write-nestedgroup.png)

#### 自动折叠分组

使用`console.groupCollapsed()`替换`console.group()`，可以让分组信息自动折叠显示。如下所示：

![](http://p1.bpimg.com/582863/7cd10f4496f10229.png)

输出信息为：

![](https://developers.google.cn/web/tools/chrome-devtools/console/images/console-write-groupcollapsed.png)


### 错误和警告

错误和警告与基本输出使用方法一致，只是输出信息的样式不一样，更引入注意，表示该信息比较重要。

#### console.error()

错误信息是红色的，并且左边显示一个红叉。

![](http://p1.bpimg.com/582863/dbcf032c4739b2bb.png)

输出：

![](https://developers.google.cn/web/tools/chrome-devtools/console/images/console-write-error-server-not-resp.png)

#### console.warn()

警告的信息左边有一个黄色的感叹号。

![](http://p1.bpimg.com/582863/d5963103cb4e876a.png)

输出： 

![](https://developers.google.cn/web/tools/chrome-devtools/console/images/console-write-warning-too-few-nodes.png)

### 断言

使用`console.assert()`方法设置断言，它可以接受两个参数，当第一个参数为false时，会输出错误信息。第二个参数用于输出具体的信息内容。

如下示例所示：我们断言list的子节点一定少于500个，不然就会输出错误信息。

`console.assert(list.childNodes.length < 500, "Node count is > 500");`

当子节点大于500时，输出：

![](https://developers.google.cn/web/tools/chrome-devtools/console/images/console-write-assert-failed.png)

### 字符串替换和格式化

上述的所有输出日志的方法，第一个参数如是是字符串，可能包含一个或者多个格式说明符。每个格式说明符用百分号开始后面跟一个字母标识以什么格式输出相应的值。后面的参数会按顺序替换到占位符相应的位置。

`console.log("%s has %d points", "Sam", 100);`

如上代码，使用字符串和数值类型的格式说明符，插入后面的参数值，你会看到控制台输出的内容为：“Sam has 100 points” 

格式说明符如下表所示：

格式说明符 | 输出
--- | ---
%s | 以字符串格式输出
%i 或者 %d | 以整数输出
%f | 以浮点数输出
%o | 输出展开的DOM元素，就跟**Elements**面板中一样
%O | 输出展开的JS对象
%c | 在输出字符串中应用样式规则

如下示例，使用整数格式化输出`document.childNodes`的长度，使用浮点数格式化`Date.now()`的值。
`console.log("Node count: %d, and the time is %f.", document.childNodes.length, Date.now());`

控制台输出：

![](https://developers.google.cn/web/tools/chrome-devtools/console/images/console-write-log-multiple.png)

#### 输出结果应用样式

使用上述的%c格式说明符，可以为输出结果指定样式。在字符串开头加上%c说明符，第二个参数指定想要应用的样式。如下代码所示：

`console.log("%cThis will be formatted with large, blue text", "color: blue; font-size: x-large");`

在控制台中显示的效果如下图所示：

![](https://developers.google.cn/web/tools/chrome-devtools/console/images/console-write-format-string.png)

#### 将DOM元素格式化为JavaScript对象

默认情况下，在控制台中输出的DOM元素会以HTML格式呈现，

