<!-- toc -->

## 远程调试安卓设备

本节介绍如何使用谷歌开发者工具调试安卓设备中的网页。如下描述中，**工作机**指开着谷歌开发者工具用于远程调试安卓设备的电脑。**安卓设备**指被调试的对象。

![](/assets/remote/remote-debugging.png)

### 要求
开始调试前，你需要准备：
* 在工作机装高于上32版本谷歌浏览器（含谷歌开发者工具）
* 工作机如果是Windows，确保装上相关的USB驱动
* 将安卓设备用USB线连接至工作机
* 安卓设备的系统版本要高于4.0 
* 安卓设备上装好谷歌浏览器

### 开启USB调试
在安卓设备上打开**设置**，找到**开发人员选项**，开启**USB调试**。如果安卓设备上的版本是4.2及以后的版本，开发人员选项默认会被隐藏，怎么打开请自行百度。

### 连接安卓设备
在工作机上打开谷歌开发者工具，远程调试不能在隐身模式下进行。
打开谷歌开发者工具，选择**更多工具**>**远程设备** 

![](/assets/remote/open-remote-devices.png)

如果更多工具中没有检查设备选项，可以直接在浏览器地址栏输入`chrome://inspect/#devices`打开检查设备页面。如下图

![](/assets/remote/40e68c3f0e7d3b6d.png)

当前页面会列举出来所有已连接设备的状态，如果没有任何连接的设备，便如上图所示。

**请注意**请将安卓设备和工作机直接通过USB线相连，不要使用任何交换机之类的设备。如果是第一次连接，会提示缺少授权，此时，你需要打开安卓设备，点击允许调试，授权工作机接入进行调试，如下图。

![](/assets/remote/969a4d0168d85da5.png)

连接成功后，可以看到如下图所示的设备，我用来调试的设备是 HTC 802d，后面紧跟着设备的序列号。可以看到安卓设备上装的是54版本的谷歌浏览器。此时便可通过输入框输入地址进行访问并调试。

![](/assets/remote/818d23bbe68f0767.png)

### 在工作机上调试安卓设备

![](/assets/remote/c52ff22dffa749fe.png)

如上图所示，打开后的网页会一一列举出来，点击**inspect**会新开一个谷歌开发者工具的窗口(如下图)，调试的方法和技巧跟调试PC端网页一样。点击**focus tab**会切换到点击页面，**reload**会重新加载页面，**close**关闭页面。

![](/assets/remote/f4891bad4294e6ab.png)

**提示：**如上图为新打开页面的调试界面，需要注意的是，你在工作机看到的谷歌开发者工具的版本是安卓设备上安装的谷歌浏览器的版本，也就是说，在远程调试下，安卓设备上谷歌开发者工具的版本决定了你可以使用的功能，它可能跟你在工作机上的版本不一样。

![](/assets/remote/254051f53075d41c.png)

如上图所示，面板左侧是安卓设备上显示的网页的镜像，你可以通过**切换镜像**摁钮进行切换显示。同时，跟在PC端调试一样，可以通过**选取元素**摁钮，选取页面上的元素，被选择的元素会高亮显示。镜像只显示页面内容，如下图所示，透明的部分代表了安卓设备自己的功能面板，譬如搜索框，状态条等等。

![](/assets/remote/505e2f739badae93.png)

**提示：**镜像会一直不停的抓取快照帧，所以对性能以及帧敏感的情况下，请关闭。

可以和镜像进行如下交互：
* 点击会转化为轻触，并在设备上触发相应的事件
* 键盘事件会被发送到设备
* 模拟捏合手势，在拖动的时候摁住shift键
* 滚动  可以使用触摸板或者鼠标滚轮

